import{r as C,u as z,a as F,b as Z,c as $,d as b,e as L,j as t,B as T,Z as D,t as V,_ as q,p as G,z as J,E as a}from"./index-0ac39712.js";import{n as K}from"./index-9c3de17c.js";import{I as Q}from"./index-191db38a.js";import{m as X}from"./index-1bb6e8a9.js";function ns(){var S,y,H,j;const[_,A]=K.useNotification(),[k,c]=C.useState(!1),[d,B]=C.useState(""),{address:n=J,isConnected:l}=z(),u=F(),{data:e,refetch:h,isRefetching:g}=Z({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[f,p]=[0n,D];e&&Array.isArray(e)&&((S=e[0])!=null&&S.result)&&((y=e[1])!=null&&y.result)&&([f,p]=[(H=e[0])==null?void 0:H.result,(j=e[1])==null?void 0:j.result]);const m=(s,o)=>{_.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${o}`,target:"_blank",children:"Transaction Link"})})},{config:E}=$({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:I,write:N}=b({...E,onSuccess:({hash:s})=>{m("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:r,isLoading:P,write:x}=b({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{m("Setting User Hash Successful",s),u({hash:s,description:"New user hash set"})}}),{isLoading:U}=L({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:R}=L({hash:r==null?void 0:r.hash,onSuccess(){h()}}),W=async()=>{if(x){c(!0);try{const s=BigInt(V(d)).toString(),o="0",{buildPoseidon:v}=await q(()=>import("./main-6579dd47.js"),["assets/main-6579dd47.js","assets/index-0ac39712.js","assets/index-006de7d0.css","assets/readable-browser-141803f1.js"]),w=await v(),M=w.F.toString(w([s,o,n])),O=G(`0x${BigInt(M).toString(16)}`,{size:32});x({args:[O]})}catch(s){console.error(s),s instanceof Error&&X.error("Something went wrong setting the user hash: "+s.message)}c(!1)}};return t.jsxs(t.Fragment,{children:[A,t.jsxs("p",{style:{opacity:R||g?.25:1},children:["Current User Hash: ",p]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(Q,{maxLength:30,minLength:8,onChange:s=>B(s.target.value)}),t.jsx(T,{disabled:d.length<8,loading:k||P,style:{marginLeft:"50px"},onClick:W,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:U||g?.25:1},children:["Current Balance: ",(f/BigInt(1e18)).toString()]}),t.jsx(T,{loading:I,style:{marginLeft:"50px"},onClick:N,children:"Mint 10 000 Tokens"})]})]})}export{ns as default};
