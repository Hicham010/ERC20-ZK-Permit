import{r as b,u as I,a as M,b as v,c as F,d as C,e as H,j as t,B as y,H as O,A as K,E as _,f as $}from"./index-3e6954fe.js";import{I as q,B as j,b as z,u as D}from"./utils-67fe6313.js";import{n as G}from"./index-e7dacd34.js";import"./readable-browser-96aa7e8f.js";import"./useNotification-d349cd95.js";function ss(){const[w,L]=G.useNotification(),[B,c]=b.useState(!1),[d,P]=b.useState(""),{address:n=K,isConnected:l}=I(),u=M(),a={address:_,abi:$.abi},{data:e,refetch:h,isRefetching:f}=v({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[g,m]=[0n,O];e&&e[0].result&&e[1].result&&([g,m]=[e[0].result,e[1].result]);const p=(s,o)=>{w.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${o}`,target:"_blank",children:"Transaction Link"})})},{config:T}=F({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:k,write:A}=C({...T,onSuccess:({hash:s})=>{p("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:r,isLoading:N,write:x}=C({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{p("Setting User Hash Successful",s),u({hash:s,description:"Setted new userhash"})}}),{isLoading:U}=H({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:E}=H({hash:r==null?void 0:r.hash,onSuccess(){h()}}),R=async()=>{if(x){c(!0);try{const s=j.from("0x"+Buffer.from(d).toString("hex")).toString(),o="0",S=await z(),W=S.F.toString(S([s,o,n])),Z=D.hexZeroPad(j.from(W).toHexString(),32);x({args:[Z]})}catch(s){console.error(s)}finally{c(!1)}}};return t.jsxs(t.Fragment,{children:[L,t.jsxs("p",{style:{opacity:E||f?.25:1},children:["Current User Hash: ",m]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(q,{maxLength:30,minLength:8,onChange:s=>P(s.target.value)}),t.jsx(y,{disabled:d.length<8,loading:B||N,style:{marginLeft:"50px"},onClick:R,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:U||f?.25:1},children:["Current Balance: ",(g/BigInt(1e18)).toString()]}),t.jsx(y,{loading:k,style:{marginLeft:"50px"},onClick:A,children:"Mint 10 000 Tokens"})]})]})}export{ss as default};
