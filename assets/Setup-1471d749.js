import{r as C,u as z,a as F,b as Z,c as D,d as b,e as L,j as e,B as T,Z as V,t as $,_ as q,n as G,z as J,E as a}from"./index-d7ffc220.js";import{n as K}from"./index-89b5af3f.js";import{I as Q}from"./index-069b444c.js";import{m as X}from"./index-36dd01b6.js";function ns(){var S,H,w,j;const[_,P]=K.useNotification(),[k,c]=C.useState(!1),[d,B]=C.useState(""),{address:n=J,isConnected:l}=z(),u=F(),{data:t,refetch:h,isRefetching:g}=Z({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[f,m]=[0n,V];t&&((S=t[0])!=null&&S.result)&&((H=t[1])!=null&&H.result)&&([f,m]=[(w=t[0])==null?void 0:w.result,(j=t[1])==null?void 0:j.result]);const p=(s,r)=>{_.success({message:s,description:e.jsx("a",{href:`https://sepolia.etherscan.io/tx/${r}`,target:"_blank",rel:"noopener noreferrer",children:"Transaction Link"})})},{config:E}=D({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:I,write:N}=b({...E,onSuccess:({hash:s})=>{p("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:o,isLoading:U,write:x}=b({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{p("Setting User Hash Successful",s),u({hash:s,description:"New user hash set"})}}),{isLoading:A}=L({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:R}=L({hash:o==null?void 0:o.hash,onSuccess(){h()}}),W=async()=>{if(x){c(!0);try{const s=BigInt($(d)).toString(),r="0",{buildPoseidon:v}=await q(()=>import("./main-24430715.js"),["assets/main-24430715.js","assets/index-d7ffc220.js","assets/index-006de7d0.css","assets/readable-browser-7cca406f.js"]),y=await v(),M=y.F.toString(y([s,r,n])),O=G(BigInt(M),{size:32});x({args:[O]})}catch(s){console.error(s),s instanceof Error&&X.error("Something went wrong setting the user hash: "+s.message)}c(!1)}};return e.jsxs(e.Fragment,{children:[P,e.jsxs("p",{style:{opacity:R||g?.25:1},children:["Current User Hash: ",m]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Q.Password,{maxLength:30,minLength:8,onChange:s=>B(s.target.value)}),e.jsx(T,{disabled:d.length<8,loading:k||U,style:{marginLeft:"50px"},onClick:W,children:"Set Password"})]}),e.jsx("br",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[e.jsxs("p",{style:{opacity:A||g?.25:1},children:["Current Balance: ",(f/BigInt(1e18)).toString()]}),e.jsx(T,{loading:I,style:{marginLeft:"50px"},onClick:N,children:"Mint 10 000 Tokens"})]})]})}export{ns as default};
