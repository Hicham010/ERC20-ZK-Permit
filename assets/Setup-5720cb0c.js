import{r as p,u as W,a as R,b as v,B as o,c as x,d as S,j as e,e as y,A as I,E as M,f as F,Z as O,H as K}from"./index-f9f1adb1.js";import{I as $,b as _}from"./poseidon_gencontract-37361b94.js";import{n as q}from"./index-fc00edc3.js";import"./readable-browser-d655b025.js";import"./useNotification-85607c15.js";function V(){const[b,C]=q.useNotification(),[H,c]=p.useState(!1),[d,j]=p.useState(""),{address:t=I,isConnected:l}=W(),n={address:M,abi:F.abi},{data:[L,U]=[O,K],refetch:h,isRefetching:u}=R({contracts:[{...n,functionName:"balanceOf",args:[t]},{...n,functionName:"userHash",args:[t]}],enabled:l,staleTime:4e3}),f=(s,r)=>{b.success({message:s,description:e.jsx("a",{href:`https://sepolia.etherscan.io/tx/${r}`,target:"_blank",children:"Transaction Link"})})},{config:k}=v({...n,functionName:"mint",args:[t,o.from("1000")],enabled:l}),{data:a,isLoading:w,write:A}=x({...k,onSuccess:({hash:s})=>{f("Mint Successful",s)}}),{data:i,isLoading:N,write:g}=x({...n,functionName:"setUserHash",mode:"recklesslyUnprepared",onSuccess:({hash:s})=>{f("Setting User Hash Successful",s)}}),{isLoading:P}=S({hash:a==null?void 0:a.hash,onSuccess(){h()}}),{isLoading:B}=S({hash:i==null?void 0:i.hash,onSuccess(){h()}}),T=async()=>{if(g){c(!0);try{const s=o.from("0x"+Buffer.from(d).toString("hex")).toString(),r="0",m=await _(),Z=m.F.toString(m([s,r,t])),E=o.from(Z).toHexString();g({recklesslySetUnpreparedArgs:[E]})}catch(s){console.error(s)}finally{c(!1)}}};return e.jsxs(e.Fragment,{children:[C,e.jsxs("p",{style:{opacity:B||u?.25:1},children:["Current User Hash: ",U]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx($,{maxLength:30,minLength:8,onChange:s=>j(s.target.value)}),e.jsx(y,{disabled:d.length<8,loading:H||N,style:{marginLeft:"50px"},onClick:T,children:"Set Password"})]}),e.jsx("br",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[e.jsxs("p",{style:{opacity:P||u?.25:1},children:["Current Balance: ",L.div(`${1e18}`).toString()]}),e.jsx(y,{loading:w,style:{marginLeft:"50px"},onClick:A,children:"Mint 10 000 Tokens"})]})]})}export{V as default};
