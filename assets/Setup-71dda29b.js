import{r as H,u as v,a as F,b as O,c as K,d as y,e as j,j as t,B as w,H as _,A as $,E as q,f as z}from"./index-ce951c0a.js";import{I as D,B as L,b as G,u as J}from"./utils-befbed8d.js";import{n as Q}from"./index-fa1e854a.js";import"./readable-browser-f7d1f8ec.js";import"./useNotification-a6834c2f.js";function es(){var S,b;const[B,P]=Q.useNotification(),[T,c]=H.useState(!1),[d,k]=H.useState(""),{address:n=$,isConnected:l}=v(),u=F(),a={address:q,abi:z.abi},{data:e,refetch:h,isRefetching:f}=O({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[g,m]=[0n,_];e&&e[0].result&&e[1].result&&([g,m]=[(S=e[0])==null?void 0:S.result,(b=e[1])==null?void 0:b.result]);const p=(s,o)=>{B.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${o}`,target:"_blank",children:"Transaction Link"})})},{config:A}=K({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:N,write:U}=y({...A,onSuccess:({hash:s})=>{p("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:r,isLoading:E,write:x}=y({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{p("Setting User Hash Successful",s),u({hash:s,description:"Setted new userhash"})}}),{isLoading:R}=j({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:W}=j({hash:r==null?void 0:r.hash,onSuccess(){h()}}),Z=async()=>{if(x){c(!0);try{const s=L.from("0x"+Buffer.from(d).toString("hex")).toString(),o="0",C=await G(),I=C.F.toString(C([s,o,n])),M=J.hexZeroPad(L.from(I).toHexString(),32);x({args:[M]})}catch(s){console.error(s)}finally{c(!1)}}};return t.jsxs(t.Fragment,{children:[P,t.jsxs("p",{style:{opacity:W||f?.25:1},children:["Current User Hash: ",m]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(D,{maxLength:30,minLength:8,onChange:s=>k(s.target.value)}),t.jsx(w,{disabled:d.length<8,loading:T||E,style:{marginLeft:"50px"},onClick:Z,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:R||f?.25:1},children:["Current Balance: ",(g/BigInt(1e18)).toString()]}),t.jsx(w,{loading:N,style:{marginLeft:"50px"},onClick:U,children:"Mint 10 000 Tokens"})]})]})}export{es as default};
