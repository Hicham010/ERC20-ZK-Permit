import{r as j,u as O,a as K,b as _,c as $,d as w,e as L,j as t,B,H as q,A as z,E as D,f as G}from"./index-398e9453.js";import{I as J,B as P,b as Q,u as V}from"./utils-aeca18d2.js";import{n as X}from"./index-616ab5bb.js";import"./readable-browser-1b646fe1.js";import"./useNotification-81035bd4.js";function as(){var S,b,C,H;const[T,k]=X.useNotification(),[A,c]=j.useState(!1),[d,N]=j.useState(""),{address:n=z,isConnected:l}=O(),u=K(),a={address:D,abi:G.abi},{data:e,refetch:h,isRefetching:f}=_({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[g,m]=[0n,q];e&&((S=e[0])!=null&&S.result)&&((b=e[1])!=null&&b.result)&&([g,m]=[(C=e[0])==null?void 0:C.result,(H=e[1])==null?void 0:H.result]);const p=(s,o)=>{T.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${o}`,target:"_blank",children:"Transaction Link"})})},{config:U}=$({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:E,write:R}=w({...U,onSuccess:({hash:s})=>{p("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:r,isLoading:W,write:x}=w({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{p("Setting User Hash Successful",s),u({hash:s,description:"Setted new userhash"})}}),{isLoading:Z}=L({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:I}=L({hash:r==null?void 0:r.hash,onSuccess(){h()}}),M=async()=>{if(x){c(!0);try{const s=P.from("0x"+Buffer.from(d).toString("hex")).toString(),o="0",y=await Q(),v=y.F.toString(y([s,o,n])),F=V.hexZeroPad(P.from(v).toHexString(),32);x({args:[F]})}catch(s){console.error(s)}finally{c(!1)}}};return t.jsxs(t.Fragment,{children:[k,t.jsxs("p",{style:{opacity:I||f?.25:1},children:["Current User Hash: ",m]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(J,{maxLength:30,minLength:8,onChange:s=>N(s.target.value)}),t.jsx(B,{disabled:d.length<8,loading:A||W,style:{marginLeft:"50px"},onClick:M,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:Z||f?.25:1},children:["Current Balance: ",(g/BigInt(1e18)).toString()]}),t.jsx(B,{loading:E,style:{marginLeft:"50px"},onClick:R,children:"Mint 10 000 Tokens"})]})]})}export{as as default};
