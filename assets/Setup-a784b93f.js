import{r as j,u as F,a as _,b as D,c as K,d as w,e as L,j as t,B,Z as $,f as q,E as z,g as G}from"./index-e3715323.js";import{I as J,B as E,b as Q,u as V}from"./utils-e6f1fdd1.js";import{n as X}from"./index-037bba31.js";import"./readable-browser-19c1f74d.js";import"./useNotification-94f3a1a0.js";function as(){var S,b,C,H;const[P,R]=X.useNotification(),[T,c]=j.useState(!1),[d,k]=j.useState(""),{address:n=q,isConnected:l}=F(),u=_(),a={address:z,abi:G.abi},{data:e,refetch:h,isRefetching:g}=D({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[f,m]=[0n,$];console.log({data:e}),e&&((S=e[0])!=null&&S.result)&&((b=e[1])!=null&&b.result)&&([f,m]=[(C=e[0])==null?void 0:C.result,(H=e[1])==null?void 0:H.result]);const p=(s,r)=>{P.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${r}`,target:"_blank",children:"Transaction Link"})})},{config:A}=K({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:N,write:U}=w({...A,onSuccess:({hash:s})=>{p("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:o,isLoading:Z,write:x}=w({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{p("Setting User Hash Successful",s),u({hash:s,description:"Setted new userhash"})}}),{isLoading:W}=L({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:I}=L({hash:o==null?void 0:o.hash,onSuccess(){h()}}),M=async()=>{if(x){c(!0);try{const s=E.from("0x"+Buffer.from(d).toString("hex")).toString(),r="0",y=await Q(),O=y.F.toString(y([s,r,n])),v=V.hexZeroPad(E.from(O).toHexString(),32);x({args:[v]})}catch(s){console.error(s)}finally{c(!1)}}};return t.jsxs(t.Fragment,{children:[R,t.jsxs("p",{style:{opacity:I||g?.25:1},children:["Current User Hash: ",m]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(J,{maxLength:30,minLength:8,onChange:s=>k(s.target.value)}),t.jsx(B,{disabled:d.length<8,loading:T||Z,style:{marginLeft:"50px"},onClick:M,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:W||g?.25:1},children:["Current Balance: ",(f/BigInt(1e18)).toString()]}),t.jsx(B,{loading:N,style:{marginLeft:"50px"},onClick:U,children:"Mint 10 000 Tokens"})]})]})}export{as as default};
