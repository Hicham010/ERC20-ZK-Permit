import{r as x,a4 as R,a5 as v,ag as I,ae as r,af as o,ac as c,ah as b,ai as S,a6 as e,a8 as y,a9 as M,aa as F,ab as O}from"./index-f4b97eb9.js";import{I as K,o as $}from"./poseidon_gencontract-de6da4c2.js";import{n as _}from"./index-b097c79c.js";import"./readable-browser-8b7d754c.js";import"./useNotification-77eb0dea.js";function Q(){const[C,H]=_.useNotification(),[j,d]=x.useState(!1),[l,L]=x.useState(""),{address:a=M,isConnected:h}=R(),u={address:r,abi:o.abi,args:[a]},{data:[U,k]=[F,O],refetch:f,isRefetching:g}=v({contracts:[{...u,functionName:"balanceOf"},{...u,functionName:"userHash"}],enabled:h}),m=(s,t)=>{C.success({message:s,description:e.jsx("a",{href:`https://sepolia.etherscan.io/tx/${t}`,target:"_blank",children:"Transaction Link"})})},{config:N}=I({address:r,abi:o.abi,functionName:"mint",args:[a,c.from("1000")],enabled:h}),{data:n,isLoading:P,write:w}=b({...N,onSuccess:({hash:s})=>{m("Mint Successful",s)}}),{data:i,isLoading:A,write:p}=b({address:r,abi:o.abi,functionName:"setUserHash",mode:"recklesslyUnprepared",onSuccess:({hash:s})=>{m("Setting User Hash Successful",s)}}),{isLoading:B}=S({hash:n==null?void 0:n.hash,onSuccess(){f()}}),{isLoading:T}=S({hash:i==null?void 0:i.hash,onSuccess(){f()}}),W=async()=>{if(a&&p){d(!0);try{const s=c.from("0x"+Buffer.from(l).toString("hex")).toString(),t=await $(),Z=t.F.toString(t([s,"0",a])),E=c.from(Z).toHexString();p({recklesslySetUnpreparedArgs:[E]})}catch(s){console.error(s)}finally{d(!1)}}};return e.jsxs(e.Fragment,{children:[H,e.jsxs("p",{style:{opacity:T||g?.25:1},children:["Current User Hash: ",k]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(K,{maxLength:30,minLength:8,onChange:s=>L(s.target.value)}),e.jsx(y,{disabled:l.length<8,loading:j||A,style:{marginLeft:"50px"},onClick:W,children:"Set Password"})]}),e.jsx("br",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[e.jsxs("p",{style:{opacity:B||g?.25:1},children:["Current Balance: ",U.div(`${1e18}`).toString()]}),e.jsx(y,{loading:P,style:{marginLeft:"50px"},onClick:w,children:"Mint 10 000 Tokens"})]})]})}export{Q as default};
