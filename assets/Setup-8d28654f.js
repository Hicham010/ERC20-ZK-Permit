import{r as j,u as F,a as _,b as D,c as K,d as w,e as A,j as t,B as L,Z as z,t as $,p as q,f as G,E as J,g as Q}from"./index-42108517.js";import{I as V,B as E,b as X}from"./poseidon_gencontract-724f266e.js";import{n as Y}from"./index-54a6dad6.js";import"./readable-browser-f7172d21.js";import"./useNotification-5f96b75b.js";function is(){var S,y,H,b;const[R,T]=Y.useNotification(),[k,c]=j.useState(!1),[d,B]=j.useState(""),{address:n=G,isConnected:l}=F(),u=_(),a={address:J,abi:Q.abi},{data:e,refetch:h,isRefetching:g}=D({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[f,p]=[0n,z];e&&Array.isArray(e)&&((S=e[0])!=null&&S.result)&&((y=e[1])!=null&&y.result)&&([f,p]=[(H=e[0])==null?void 0:H.result,(b=e[1])==null?void 0:b.result]);const m=(s,o)=>{R.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${o}`,target:"_blank",children:"Transaction Link"})})},{config:N}=K({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:P,write:U}=w({...N,onSuccess:({hash:s})=>{m("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:r,isLoading:W,write:x}=w({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{m("Setting User Hash Successful",s),u({hash:s,description:"Setted new userhash"})}}),{isLoading:Z}=A({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:I}=A({hash:r==null?void 0:r.hash,onSuccess(){h()}}),M=async()=>{if(x){c(!0);try{const s=E.from($(d)).toString(),o="0",C=await X(),O=C.F.toString(C([s,o,n])),v=q(E.from(O).toHexString(),{size:32});x({args:[v]})}catch(s){console.error(s)}finally{c(!1)}}};return t.jsxs(t.Fragment,{children:[T,t.jsxs("p",{style:{opacity:I||g?.25:1},children:["Current User Hash: ",p]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(V,{maxLength:30,minLength:8,onChange:s=>B(s.target.value)}),t.jsx(L,{disabled:d.length<8,loading:k||W,style:{marginLeft:"50px"},onClick:M,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:Z||g?.25:1},children:["Current Balance: ",(f/BigInt(1e18)).toString()]}),t.jsx(L,{loading:P,style:{marginLeft:"50px"},onClick:U,children:"Mint 10 000 Tokens"})]})]})}export{is as default};
