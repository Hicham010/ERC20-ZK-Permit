import{r as C,u as z,a as F,b as Z,c as $,d as b,e as L,j as t,B as T,Z as D,t as V,_ as q,p as G,z as J,E as a}from"./index-edd61fb1.js";import{n as K}from"./index-75d65302.js";import{I as Q}from"./index-1fccf5ee.js";import{m as X}from"./index-9cf43d81.js";function ns(){var S,H,w,j;const[_,P]=K.useNotification(),[k,c]=C.useState(!1),[d,B]=C.useState(""),{address:n=J,isConnected:l}=z(),u=F(),{data:e,refetch:h,isRefetching:g}=Z({contracts:[{...a,functionName:"balanceOf",args:[n]},{...a,functionName:"userHash",args:[n]}],enabled:l,watch:!0});let[f,p]=[0n,D];e&&((S=e[0])!=null&&S.result)&&((H=e[1])!=null&&H.result)&&([f,p]=[(w=e[0])==null?void 0:w.result,(j=e[1])==null?void 0:j.result]);const m=(s,r)=>{_.success({message:s,description:t.jsx("a",{href:`https://sepolia.etherscan.io/tx/${r}`,target:"_blank",children:"Transaction Link"})})},{config:E}=$({...a,functionName:"mint",args:[n,1000n],enabled:l}),{data:i,isLoading:I,write:N}=b({...E,onSuccess:({hash:s})=>{m("Mint Successful",s),u({hash:s,description:"Minted Tokens"})}}),{data:o,isLoading:U,write:x}=b({...a,functionName:"setUserHash",onSuccess:({hash:s})=>{m("Setting User Hash Successful",s),u({hash:s,description:"New user hash set"})}}),{isLoading:A}=L({hash:i==null?void 0:i.hash,onSuccess(){h()}}),{isLoading:R}=L({hash:o==null?void 0:o.hash,onSuccess(){h()}}),W=async()=>{if(x){c(!0);try{const s=BigInt(V(d)).toString(),r="0",{buildPoseidon:v}=await q(()=>import("./main-820033ca.js"),["assets/main-820033ca.js","assets/index-edd61fb1.js","assets/index-006de7d0.css","assets/readable-browser-d235a3b2.js"]),y=await v(),M=y.F.toString(y([s,r,n])),O=G(`0x${BigInt(M).toString(16)}`,{size:32});x({args:[O]})}catch(s){console.error(s),s instanceof Error&&X.error("Something went wrong setting the user hash: "+s.message)}c(!1)}};return t.jsxs(t.Fragment,{children:[P,t.jsxs("p",{style:{opacity:R||g?.25:1},children:["Current User Hash: ",p]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(Q.Password,{maxLength:30,minLength:8,onChange:s=>B(s.target.value)}),t.jsx(T,{disabled:d.length<8,loading:k||U,style:{marginLeft:"50px"},onClick:W,children:"Set Password"})]}),t.jsx("br",{}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline"},children:[t.jsxs("p",{style:{opacity:A||g?.25:1},children:["Current Balance: ",(f/BigInt(1e18)).toString()]}),t.jsx(T,{loading:I,style:{marginLeft:"50px"},onClick:N,children:"Mint 10 000 Tokens"})]})]})}export{ns as default};
